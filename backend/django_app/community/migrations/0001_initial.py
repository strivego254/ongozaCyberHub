# Generated by Django 5.2.9 on 2026-01-07 18:04

import django.core.validators
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AISummary',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('summary_type', models.CharField(choices=[('thread', 'Thread Summary'), ('daily_digest', 'Daily Digest'), ('weekly_recap', 'Weekly Recap')], default='thread', max_length=20)),
                ('summary', models.TextField()),
                ('key_takeaways', models.JSONField(default=list)),
                ('source_comment_count', models.IntegerField(default=0)),
                ('model_used', models.CharField(default='gpt-4', max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'db_table': 'community_ai_summaries',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Badge',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, unique=True)),
                ('slug', models.SlugField(max_length=100, unique=True)),
                ('description', models.TextField()),
                ('icon_url', models.URLField()),
                ('color', models.CharField(default='#4F46E5', max_length=7)),
                ('category', models.CharField(choices=[('circle', 'Circle Achievement'), ('mission', 'Mission Achievement'), ('community', 'Community Contribution'), ('competition', 'Competition'), ('streak', 'Streak'), ('special', 'Special')], max_length=20)),
                ('rarity', models.CharField(choices=[('common', 'Common'), ('uncommon', 'Uncommon'), ('rare', 'Rare'), ('epic', 'Epic'), ('legendary', 'Legendary')], default='common', max_length=20)),
                ('criteria', models.JSONField(default=dict, help_text='Criteria to earn: {type: "mission_count", value: 10}')),
                ('points', models.IntegerField(default=10)),
                ('is_active', models.BooleanField(default=True)),
                ('is_secret', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_badges',
                'ordering': ['category', 'rarity', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Channel',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('slug', models.SlugField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('channel_type', models.CharField(choices=[('track', 'Track Channel'), ('project', 'Project Channel'), ('interest', 'Interest Group'), ('study_group', 'Study Group'), ('official', 'Official Announcements')], default='interest', max_length=20)),
                ('icon', models.CharField(default='#', max_length=10)),
                ('color', models.CharField(default='#4F46E5', max_length=7)),
                ('member_limit', models.IntegerField(default=50)),
                ('is_private', models.BooleanField(default=False)),
                ('is_archived', models.BooleanField(default=False)),
                ('requires_approval', models.BooleanField(default=False)),
                ('track_key', models.CharField(blank=True, max_length=100, null=True)),
                ('circle_level', models.IntegerField(blank=True, null=True)),
                ('member_count', models.IntegerField(default=0)),
                ('post_count', models.IntegerField(default=0)),
                ('active_today', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'community_channels',
                'ordering': ['-member_count', 'name'],
            },
        ),
        migrations.CreateModel(
            name='ChannelMembership',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('member', 'Member'), ('moderator', 'Moderator'), ('admin', 'Admin')], default='member', max_length=20)),
                ('notifications_enabled', models.BooleanField(default=True)),
                ('muted_until', models.DateTimeField(blank=True, null=True)),
                ('last_read_at', models.DateTimeField(blank=True, null=True)),
                ('unread_count', models.IntegerField(default=0)),
                ('joined_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_channel_memberships',
            },
        ),
        migrations.CreateModel(
            name='CollabRoom',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('slug', models.SlugField(max_length=100, unique=True)),
                ('description', models.TextField()),
                ('room_type', models.CharField(choices=[('ctf', 'CTF Challenge'), ('hackathon', 'Hackathon'), ('project', 'Project Collaboration'), ('debate', 'Debate/Discussion')], max_length=20)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('upcoming', 'Upcoming'), ('active', 'Active'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='upcoming', max_length=20)),
                ('mission_id', models.UUIDField(blank=True, null=True)),
                ('starts_at', models.DateTimeField()),
                ('ends_at', models.DateTimeField()),
                ('max_participants_per_uni', models.IntegerField(default=50)),
                ('is_public', models.BooleanField(default=True)),
                ('participant_count', models.IntegerField(default=0)),
                ('results', models.JSONField(default=dict, help_text='{"winner_university_id": "...", "scores": {...}}')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'community_collab_rooms',
                'ordering': ['-starts_at'],
            },
        ),
        migrations.CreateModel(
            name='CollabRoomParticipant',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('is_team_lead', models.BooleanField(default=False)),
                ('team_name', models.CharField(blank=True, max_length=100, null=True)),
                ('individual_score', models.IntegerField(default=0)),
                ('joined_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_collab_participants',
            },
        ),
        migrations.CreateModel(
            name='Comment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('content', models.TextField()),
                ('mentions', models.JSONField(blank=True, default=list)),
                ('is_edited', models.BooleanField(default=False)),
                ('is_deleted', models.BooleanField(default=False)),
                ('reaction_count', models.IntegerField(default=0)),
                ('reply_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'community_comments',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='CommunityContribution',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('contribution_type', models.CharField(choices=[('accepted_answer', 'Accepted Answer'), ('helpful_comment', 'Helpful Comment'), ('squad_leader', 'Squad Leadership'), ('challenge_win', 'Challenge Win'), ('event_host', 'Event Host'), ('mentor_session', 'Mentor Session'), ('content_creation', 'Content Creation'), ('bug_report', 'Bug Report')], max_length=30)),
                ('points_awarded', models.IntegerField(default=0)),
                ('metadata', models.JSONField(default=dict, help_text='{"post_id": "...", "squad_id": "...", "event_id": "..."}')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_contributions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CommunityEvent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('slug', models.SlugField(max_length=100, unique=True)),
                ('description', models.TextField()),
                ('event_type', models.CharField(choices=[('competition', 'Competition'), ('hackathon', 'Hackathon'), ('webinar', 'Webinar'), ('workshop', 'Workshop'), ('meetup', 'Meetup'), ('ctf', 'CTF Challenge'), ('other', 'Other')], max_length=20)),
                ('banner_url', models.URLField(blank=True, null=True)),
                ('thumbnail_url', models.URLField(blank=True, null=True)),
                ('starts_at', models.DateTimeField()),
                ('ends_at', models.DateTimeField()),
                ('registration_deadline', models.DateTimeField(blank=True, null=True)),
                ('timezone', models.CharField(default='UTC', max_length=50)),
                ('is_virtual', models.BooleanField(default=True)),
                ('location', models.CharField(blank=True, max_length=255, null=True)),
                ('meeting_url', models.URLField(blank=True, null=True)),
                ('visibility', models.CharField(choices=[('university', 'University Only'), ('global', 'Global (All Universities)'), ('invite_only', 'Invite Only')], default='global', max_length=20)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('upcoming', 'Upcoming'), ('ongoing', 'Ongoing'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='upcoming', max_length=20)),
                ('max_participants', models.IntegerField(blank=True, null=True)),
                ('prizes', models.JSONField(blank=True, default=list, help_text='[{"place": 1, "reward": "Certificate + Badge", "value": "$500"}, ...]')),
                ('badges_awarded', models.JSONField(blank=True, default=list, help_text='Badges to award: ["hackathon_participant", "ctf_winner"]')),
                ('participant_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'community_events',
                'ordering': ['starts_at'],
            },
        ),
        migrations.CreateModel(
            name='CommunityReputation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('total_points', models.IntegerField(default=0)),
                ('weekly_points', models.IntegerField(default=0)),
                ('monthly_points', models.IntegerField(default=0)),
                ('level', models.IntegerField(default=1, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('badges', models.JSONField(default=list)),
                ('titles', models.JSONField(default=list, help_text='Special titles: ["community_mentor", "top_contributor", "ama_host"]')),
                ('posts_count', models.IntegerField(default=0)),
                ('comments_count', models.IntegerField(default=0)),
                ('reactions_given', models.IntegerField(default=0)),
                ('reactions_received', models.IntegerField(default=0)),
                ('helpful_answers', models.IntegerField(default=0)),
                ('squads_led', models.IntegerField(default=0)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('level_up_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'db_table': 'community_reputation',
                'ordering': ['-total_points'],
            },
        ),
        migrations.CreateModel(
            name='EnterpriseCohort',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('enterprise_id', models.UUIDField(blank=True, null=True)),
                ('enterprise_name', models.CharField(blank=True, max_length=200, null=True)),
                ('members', models.JSONField(default=list)),
                ('is_active', models.BooleanField(default=True)),
                ('is_private', models.BooleanField(default=True)),
                ('allow_external_view', models.BooleanField(default=False)),
                ('member_count', models.IntegerField(default=0)),
                ('admin_users', models.JSONField(default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'community_enterprise_cohorts',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='EventParticipant',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('registered', 'Registered'), ('confirmed', 'Confirmed'), ('attended', 'Attended'), ('no_show', 'No Show'), ('cancelled', 'Cancelled')], default='registered', max_length=20)),
                ('team_name', models.CharField(blank=True, max_length=100, null=True)),
                ('team_role', models.CharField(blank=True, max_length=50, null=True)),
                ('placement', models.IntegerField(blank=True, null=True)),
                ('score', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('registered_at', models.DateTimeField(auto_now_add=True)),
                ('checked_in_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'db_table': 'community_event_participants',
            },
        ),
        migrations.CreateModel(
            name='Follow',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('follow_type', models.CharField(choices=[('user', 'User'), ('university', 'University'), ('tag', 'Topic/Tag')], max_length=20)),
                ('followed_tag', models.CharField(blank=True, max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_follows',
            },
        ),
        migrations.CreateModel(
            name='Leaderboard',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('leaderboard_type', models.CharField(choices=[('overall', 'Overall XP'), ('missions', 'Missions Completed'), ('community', 'Community Engagement'), ('competitions', 'Competition Wins'), ('university', 'University Ranking'), ('weekly', 'Weekly Top Performers'), ('monthly', 'Monthly Top Performers')], max_length=20)),
                ('scope', models.CharField(choices=[('global', 'Global'), ('university', 'University'), ('track', 'Track')], default='global', max_length=20)),
                ('track_key', models.CharField(blank=True, max_length=100, null=True)),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('rankings', models.JSONField(default=list, help_text='[{"rank": 1, "user_id": "...", "score": 1500, "change": 2}, ...]')),
                ('university_rankings', models.JSONField(default=list, help_text='[{"rank": 1, "university_id": "...", "score": 15000, "member_count": 500}, ...]')),
                ('is_current', models.BooleanField(default=True)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_leaderboards',
                'ordering': ['-period_end', 'leaderboard_type'],
            },
        ),
        migrations.CreateModel(
            name='ModerationLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action', models.CharField(choices=[('hide_post', 'Hide Post'), ('delete_post', 'Delete Post'), ('hide_comment', 'Hide Comment'), ('delete_comment', 'Delete Comment'), ('warn_user', 'Warn User'), ('suspend_user', 'Suspend User'), ('pin_post', 'Pin Post'), ('unpin_post', 'Unpin Post'), ('feature_post', 'Feature Post'), ('unfeature_post', 'Unfeature Post')], max_length=30)),
                ('reason', models.TextField()),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_moderation_logs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PollVote',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('option_id', models.IntegerField()),
                ('voted_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_poll_votes',
            },
        ),
        migrations.CreateModel(
            name='Post',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('post_type', models.CharField(choices=[('text', 'Text Post'), ('media', 'Media Post'), ('event', 'Event'), ('achievement', 'Achievement'), ('poll', 'Poll'), ('announcement', 'Announcement')], default='text', max_length=20)),
                ('title', models.CharField(blank=True, max_length=255, null=True)),
                ('content', models.TextField()),
                ('media_urls', models.JSONField(blank=True, default=list, help_text='List of media URLs: [{"type": "image", "url": "..."}, ...]')),
                ('link_url', models.URLField(blank=True, null=True)),
                ('link_preview', models.JSONField(blank=True, default=dict, help_text='Link preview data: {title, description, image}')),
                ('visibility', models.CharField(choices=[('university', 'University Only'), ('global', 'Global (All Universities)'), ('private', 'Private')], default='university', max_length=20)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('published', 'Published'), ('hidden', 'Hidden'), ('deleted', 'Deleted')], default='published', max_length=20)),
                ('is_pinned', models.BooleanField(default=False)),
                ('is_featured', models.BooleanField(default=False)),
                ('tags', models.JSONField(blank=True, default=list, help_text='Hashtags: ["hackathon", "security"]')),
                ('mentions', models.JSONField(blank=True, default=list, help_text='Mentioned user IDs')),
                ('event_details', models.JSONField(blank=True, default=dict, help_text='Event details: {\n            "start_time": "2025-01-15T09:00:00Z",\n            "end_time": "2025-01-15T17:00:00Z",\n            "location": "Virtual / Room 101",\n            "modality": "online|onsite|hybrid",\n            "registration_url": "https://...",\n            "max_participants": 100,\n            "rsvp_count": 0,\n            "is_competition": true,\n            "competition_type": "ctf|hackathon|quiz|webinar",\n            "prizes": ["1st: $500", "2nd: $250"]\n        }')),
                ('achievement_type', models.CharField(blank=True, help_text='Type: circle_milestone, mission_complete, badge, certification, portfolio_item', max_length=50, null=True)),
                ('achievement_data', models.JSONField(blank=True, default=dict, help_text='Achievement details: {\n            "type": "mission|circle|badge|certification",\n            "circle_level": 3,\n            "phase": 2,\n            "score": 950,\n            "badge_name": "DFIR Champion",\n            "mission_id": "uuid",\n            "portfolio_item_id": "uuid",\n            "icon_url": "...",\n            "color": "#ff6b35"\n        }')),
                ('poll_options', models.JSONField(blank=True, default=list, help_text='Poll options: [\n            {"id": "uuid", "label": "Option A", "votes": 0},\n            {"id": "uuid", "label": "Option B", "votes": 0}\n        ]')),
                ('poll_ends_at', models.DateTimeField(blank=True, null=True)),
                ('poll_multiple_choice', models.BooleanField(default=False)),
                ('poll_total_votes', models.IntegerField(default=0)),
                ('pinned_at', models.DateTimeField(blank=True, null=True)),
                ('pin_expires_at', models.DateTimeField(blank=True, null=True)),
                ('reaction_count', models.IntegerField(default=0)),
                ('comment_count', models.IntegerField(default=0)),
                ('share_count', models.IntegerField(default=0)),
                ('view_count', models.IntegerField(default=0)),
                ('trending_score', models.DecimalField(decimal_places=2, default=0, help_text='Computed score for trending algorithm', max_digits=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'db_table': 'community_posts',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Reaction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('reaction_type', models.CharField(choices=[('like', 'üëç'), ('love', '‚ù§Ô∏è'), ('celebrate', 'üéâ'), ('insightful', 'üí°'), ('curious', 'ü§î'), ('fire', 'üî•'), ('clap', 'üëè')], max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_reactions',
            },
        ),
        migrations.CreateModel(
            name='SquadMembership',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('member', 'Member'), ('leader', 'Leader'), ('co_leader', 'Co-Leader')], default='member', max_length=20)),
                ('missions_contributed', models.IntegerField(default=0)),
                ('points_contributed', models.IntegerField(default=0)),
                ('joined_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'community_squad_memberships',
            },
        ),
        migrations.CreateModel(
            name='StudySquad',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('goal', models.TextField(blank=True, null=True)),
                ('icon', models.CharField(default='üë•', max_length=10)),
                ('color', models.CharField(default='#8B5CF6', max_length=7)),
                ('circle_level', models.IntegerField(blank=True, null=True)),
                ('track_key', models.CharField(blank=True, max_length=100, null=True)),
                ('min_members', models.IntegerField(default=4)),
                ('max_members', models.IntegerField(default=8)),
                ('is_open', models.BooleanField(default=True)),
                ('is_active', models.BooleanField(default=True)),
                ('current_mission', models.UUIDField(blank=True, null=True)),
                ('missions_completed', models.IntegerField(default=0)),
                ('total_points', models.IntegerField(default=0)),
                ('weekly_streak', models.IntegerField(default=0)),
                ('member_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'community_study_squads',
                'ordering': ['-total_points', '-member_count'],
            },
        ),
        migrations.CreateModel(
            name='University',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, unique=True)),
                ('slug', models.SlugField(max_length=100, unique=True)),
                ('code', models.CharField(db_index=True, help_text='Short code for matching, e.g., UON, KU, JKUAT', max_length=20, unique=True)),
                ('short_name', models.CharField(blank=True, max_length=50, null=True)),
                ('email_domains', models.JSONField(default=list, help_text='List of email domains for auto-mapping, e.g., ["stanford.edu", "alumni.stanford.edu"]')),
                ('logo_url', models.URLField(blank=True, null=True)),
                ('banner_url', models.URLField(blank=True, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('website', models.URLField(blank=True, null=True)),
                ('country', models.CharField(blank=True, max_length=2, null=True)),
                ('city', models.CharField(blank=True, max_length=100, null=True)),
                ('region', models.CharField(blank=True, max_length=100, null=True)),
                ('location', models.TextField(blank=True, help_text='Full address or location description', null=True)),
                ('timezone', models.CharField(default='Africa/Nairobi', max_length=50)),
                ('is_verified', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('allow_cross_university_posts', models.BooleanField(default=True)),
                ('member_count', models.IntegerField(default=0)),
                ('post_count', models.IntegerField(default=0)),
                ('active_student_count', models.IntegerField(default=0)),
                ('events_count', models.IntegerField(default=0)),
                ('competitions_participated', models.IntegerField(default=0)),
                ('engagement_score', models.DecimalField(decimal_places=2, default=0, help_text='Computed engagement score for university ranking', max_digits=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Universities',
                'db_table': 'community_universities',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='UniversityDomain',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('domain', models.CharField(db_index=True, help_text='Email domain, e.g., uonbi.ac.ke, students.ku.ac.ke', max_length=100, unique=True)),
                ('domain_type', models.CharField(choices=[('primary', 'Primary Domain'), ('student', 'Student Email'), ('alumni', 'Alumni Email'), ('staff', 'Staff Email'), ('other', 'Other')], default='primary', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('auto_verify', models.BooleanField(default=False, help_text='Automatically verify users registering with this domain')),
                ('default_role', models.CharField(default='student', help_text='Default role for users with this domain', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name_plural': 'University Domains',
                'db_table': 'community_university_domains',
                'ordering': ['university', 'domain'],
            },
        ),
        migrations.CreateModel(
            name='UniversityMembership',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('student', 'Student'), ('faculty', 'Faculty'), ('staff', 'Staff'), ('alumni', 'Alumni'), ('admin', 'University Admin')], default='student', max_length=20)),
                ('status', models.CharField(choices=[('pending', 'Pending Verification'), ('active', 'Active'), ('suspended', 'Suspended'), ('graduated', 'Graduated')], default='active', max_length=20)),
                ('mapped_method', models.CharField(choices=[('email_domain', 'Email Domain'), ('manual', 'Manual Selection'), ('admin', 'Admin Assignment'), ('import', 'Bulk Import')], default='manual', help_text='How was this mapping created?', max_length=20)),
                ('is_primary', models.BooleanField(default=True)),
                ('auto_mapped', models.BooleanField(default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('mapped_at', models.DateTimeField(auto_now_add=True)),
                ('student_id', models.CharField(blank=True, max_length=50, null=True)),
                ('department', models.CharField(blank=True, max_length=100, null=True)),
                ('faculty', models.CharField(blank=True, max_length=100, null=True)),
                ('program', models.CharField(blank=True, max_length=150, null=True)),
                ('graduation_year', models.IntegerField(blank=True, null=True)),
                ('year_of_study', models.IntegerField(blank=True, null=True)),
                ('joined_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'community_university_memberships',
            },
        ),
        migrations.CreateModel(
            name='UserBadge',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('earned_at', models.DateTimeField(auto_now_add=True)),
                ('earned_via', models.CharField(blank=True, help_text='mission, event, community_action, etc.', max_length=50, null=True)),
                ('reference_id', models.UUIDField(blank=True, help_text='ID of mission/event that awarded this badge', null=True)),
                ('is_featured', models.BooleanField(default=False)),
            ],
            options={
                'db_table': 'community_user_badges',
            },
        ),
        migrations.CreateModel(
            name='UserCommunityStats',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('total_posts', models.IntegerField(default=0)),
                ('total_comments', models.IntegerField(default=0)),
                ('total_reactions_given', models.IntegerField(default=0)),
                ('total_reactions_received', models.IntegerField(default=0)),
                ('total_badges', models.IntegerField(default=0)),
                ('total_points', models.IntegerField(default=0)),
                ('current_streak_days', models.IntegerField(default=0)),
                ('longest_streak_days', models.IntegerField(default=0)),
                ('events_attended', models.IntegerField(default=0)),
                ('competitions_won', models.IntegerField(default=0)),
                ('global_rank', models.IntegerField(blank=True, null=True)),
                ('university_rank', models.IntegerField(blank=True, null=True)),
                ('last_post_at', models.DateTimeField(blank=True, null=True)),
                ('last_activity_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'community_user_stats',
            },
        ),
    ]
